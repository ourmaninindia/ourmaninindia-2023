{{ $featured_image := partial "func/GetCoverImage.html" . }}
<article class="bb b--black-10">
  <div class="db pv4 ph3 ph0-l no-underline dark-gray">
    <div class="flex flex-column flex-row-ns">
      {{ if $featured_image }}
        <div class="{{ cond (eq $.Site.Language.LanguageDirection "rtl") "pl3-ns" "pr3-ns" }} mb4 mb0-ns w-100 w-40-ns">
          <a href="{{.RelPermalink}}" class="db grow">
            <img src="{{ $featured_image }}" class="img" alt="image from {{ .Title }}"> 
          </a>
        </div>
      {{ end }}
      <div class="blah w-100{{ if $featured_image }} w-60-ns {{ cond (eq $.Site.Language.LanguageDirection "rtl") "pr3-ns" "pl3-ns" }}{{ end }}">
        <h1 class="f3 fw1 athelas mt0 mb1 lh-title">
          <a href="{{.RelPermalink}}" class="color-inherit dim link">{{ .Title }}</a>
        </h1>
        <h2 class="f5 fw4 mt0"><i>{{ .Date | time.Format (default "January 2, 2006" .Site.Params.date_format) -}}</i></h2>
        <div class="f6 f5-l lh-copy nested-copy-line-height nested-links">
          {{ $summary_splits := split .Summary "<!--endtoc-->" }}
          {{ if eq (len $summary_splits) 2 }}
              <!-- If that endtoc special comment is present, output only the part after that comment as Summary. -->
              {{ index $summary_splits 1 | safeHTML }}
          {{ else }}
              <!-- Print the whole Summary if endtoc special comment is not found. -->
              {{ .Summary }}
          {{ end }}
        </div>
          <a href="{{.RelPermalink}}" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">{{ $.Param "read_more_copy" | default (i18n "readMore") }}</a>
        {{/* TODO: add author
        <p class="f6 lh-copy mv0">By {{ .Author }}</p> */}}
      </div>
    </div>
  </div>
</article>
